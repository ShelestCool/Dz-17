{"version":3,"sources":["js/content.js","js/list.js","js/reset-form.js","js/form.js","js/app.js"],"names":["Content","container","data","updateList","handleClickTrashBtn","_clickTrashBtn","bind","innerHTML","id","btnNode","document","createElement","classList","value","textContent","setAttribute","addEventListener","_clickEditBtn","event","currentTarget","getAttribute","form","querySelector","titleField","contentField","idField","dateField","fetch","method","then","response","json","list","forEach","item","title","content","date","$","modal","catch","error","console","isConfirm","confirm","_clear","btnEdit","_createEditButton","btnTrash","_createTrashButton","template","btnWrap","append","List","activeItemId","handleClickList","_clickList","_init","target","remove","_removeActive","add","render","includes","_selectListItem","resetForm","reset","querySelectorAll","input","Form","btnSubmit","listContainer","handleSubmit","_submit","num","parsedNum","day","_parseNumber","getDate","month","getMonth","year","getFullYear","hours","getHours","minutes","getMinutes","url","headers","body","JSON","stringify","preventDefault","currentMethod","currentDate","Date","_setMetaData","getTime","_buildDate","formData","FormData","name","_send","formNode","createBtnNode","listNode"],"mappings":"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FY5B,CDQc,CAAmB,MGpB5B,GAAmCA,IHoB1B,CAAhB,IGpBA;AHqBA,AGpBD,AFYE,OAJD,GDYMjD,GCRC,MDQQ,GAAGL,IAAI,CAACC,aAAL,CAAmB,eAAnB,CAAlB;AAEAD,ACTE,MDSFA,IAAI,CAACN,YAAL,CAAkB,aAAlB,EAAiC,KAAjC;AAEAY,ACVE,MDUFA,KAAK,CAAC,CCVC2B,UDUF,EAAc,ACVjB,GAAoB,IAApB;ADUmB1B,ACTpB,QDSoBA,MAAM,EAAE,eGtBpBS,MAAM;AHsBI,AGrBnB,OHqBK,CAAL,CACGR,IADH,CACQ,UAACC,QAAD;AAAA,AGrBR,AFaA,UEbI8C,CFaC1E,EEbE,EHqBe4B,ACRtB,CEbU,AFaAG,KEbK4C,EHqBe,ACR9B,CDQ+B9C,ACRb,IDQI,EAAd,GGrBE,CAAkBM,AFaTH,IEba,AFad,CEbe4C,CFaL,MEbA,EAAlB,CAAV;AHqBQ,ACPN,ODMF,EAEGjD,GCRGrB,CDMN,CAEQ,ACRA,IAAI0B,IAAI,CAAC1B,CDQRN,CCRP,EAAmB,CDQb,EAAU;AACdA,AGtBJ,AFcI,QDQAA,EGtBA6E,EHsBI,CAAC/C,EGtBA,EHsBL,CAAUC,AGtBF,KAAK4C,EHsBb,CAAkB,SGtBV,CHsBW3C,AGtBOG,IHsBR,AGtBY,CAAC2C,CHsBH,OGtBF,KAAkB,CAApC,CAAZ;AHuBM,ACRF,cDQM9C,IAAI,CAAC1B,EAAL,IAAWA,EAAf,EAAmB;AACjBe,AGvBR,AFeI,UEfA0D,EHuBI1D,EGvBA,GAAGc,IAAI,CHuBG,AGvBF6C,CHuBGrE,KAAX,GAAmBqB,EGvBhB,EHuBoB,AGvB/B,CHuBgCC,KAAxB;AACAX,ACRJ,UAAA,EDQIA,GCRA,CAACY,OAAL,CDQgB,ACRH0B,CDQIjD,KAAb,ACRJ,CAAoBqB,EDQKA,ECRzB,EDQ6B,ACRH,CDQIE,ICRA,CAAC0B,EDQ3B,ICRsB,CAAYxD,IAAZ,CAAiB,KAAjB,CAA1B;ADSImB,AGvBR,AFeG,UEfC0D,EHuBI1D,GGvBC,GAAG,CHuBG,CAACZ,GGvBCgE,EHuBT,GAAgB3C,IAAI,CAAC1B,EAArB,AGvBI,CAAkB6B,IAAI,CAAC+C,QAAL,EAAlB,CAAZ;AHwBQ1D,ACRP,OAPD,KDeQA,SAAS,CAACb,KAAV,GAAkBqB,IAAI,CAACG,IAAvB;AAEAC,AGzBR,AFgBD,UEhBK+C,EHyBI/C,CAAC,CAAC,GGzBC,GAAG,KAAKuC,CHyBV,CAAD,CAAgBtC,KAAhB,CAAsB,GGzBhB,CAAkBF,EHyBxB,EGzB4B,CAACiD,UAAL,EAAlB,CAAd;AH0BO;AACF,AGzBL,SHgBI,cGhBMV,GAAV,cAAiBG,KAAjB,cAA0BE,IAA1B,cAAkCE,KAAlC,cAA2CE,OAA3C;AH0BG,AGzBJ,MAED,CHUE,EAcG7C,KAdH,CAcS,UAACC,KAAD,CCXAvB,OAAO;ADWP,ACVT,UAAMwC,KDUchB,CCVR,GAAGxB,GDUY,CAACuB,CCVR,CAACiB,GDUD,CAAcjB,ECVlC,GDUoB,CAAX;AAAA,OAdT;AAeD,ACTC,UAAIiB,MAAM,CAAC9C,SAAP,CAAiBC,KAAjB,CAAuBkD,QAAvB,CAAgC,WAAhC,CAAJ,EAAkD;AAChD,YAAMvD,EAAE,GAAGkD,MAAM,CAACtC,EEhBhBlB,MAAM0B,IFgBG,CAAoB,GEhBf,MFgBL,CAAX;AEhBgB;AFkBhB,aAAKoC,eAAL,CAAqBxD,EAArB,IDQWU,OAAO;AAAA,AGzBpB,AFkBC,UElBGqE,GAAG,GAAG,WAAV;AAEA,AFiBD,UEjBK3D,MAAM,IAAI,KAAd,EAAqB2D,GAAG,GAAGA,GAAG,cAAOrF,IAAI,CAACM,EAAZ,CAAT;AHwBrB,AGtBAmB,MAAAA,IHsBMnB,CGtBD,CHsBG,AGtBF+E,GHsBKrE,AGtBN,EAAM,GHsBK,CAACC,aAAN,CAAoBC,YAApB,CAAiC,SAAjC,CAAX;AACA,AGtBEQ,QAAAA,EHsBIe,IGtBE,EAANf,GHsBa,GAAGgB,AGvBP,OHuBc,CAAC,sCAAD,CAAzB;AAEA,AGvBE4C,QAAAA,EHuBE,CAAC7C,IGvBI,EAAE,GHuBX,EAAgB,KCRXzC,MAAM;ADUXyB,AGzBa,AFeF,MDUXA,KAAK,eGzBwB,MHyBVnB,EAAd,GAAoB;AAAEoB,AGzBhB,QHyBgBA,CG3BhB,KH2BsB,EAAE;AAAV,AGxBvB6D,AFeF,ODSK,CAAL,AGxBEA,CHyBC5D,ECVE3B,CEfC,CHwBN,CACQ,AGzBAwF,CFeR,GEfY,AFeAxF,CEfCyF,GFeb,EDUS7D,IGzBD,CAAe5B,GHyBf,CGzBA;AHyBA,AG5BG,OAAN,CAAL,CAKG2B,IALH,CAKQ,CHuBcC,QAAQ,CAACC,AGvBtBD,IHuBa,EAAd,EGvBA;AHuBA,AGvBA,AFcR,ODQA,EAEGD,ECVEgB,EDQL,CAEQ,CGxBcf,EFctB,MEd8B,CHwBrB5B,AGxBsB6B,IHwBvB,AGxBc,EHwBJ,AGxBV;AHyBJ,AGzBI,OALR,EAMGF,IANH,CAMQ,UAAC3B,IAAD,EAAU;AHyBd,AGxBA,AFcJ,QDUI,AGxBA,GFcCA,EDUG,AGxBA,CHwBC2C,AGxBAb,CFcT,CAAUC,EEdN,CAAU6B,CHwBV,GAFc,ACRlB,CDWI,ACXc,CEdd,CAAiB5D,IAAI,CAAC8B,GFcPE,CEdf,GFcc,EAAU;AEbzB,AFcD,OEtBF,EASGM,GFaKU,EEtBR,CASS,KFaO,KEbNT,KAAD,oDFciCP,IAAI,CAAC1B,EAD/B,gCAEJ0B,IAAI,CAACC,KAFD,qCAGDD,IAAI,CAACG,IAHJ,qCAAd;AEbO,AFoBP,QAAA,MAAI,CEpBcK,AFoBbzC,OEpBoB,CAACwC,CFoB1B,CAAelC,GEpBG,CAAckC,KAAd,AFoBlB,CEpBO,EFoBoB,MAAI,CAACxC,SAAL,CAAeM,SAAf,GAA2B2C,QAAtD;ADIE,AGxBK,AFqBR,OE9BD,AFqBA,KDYQ,KAAI,CAAC/C,UAAT,EAAqB;AACnB,AGxBP,UHwBO,KAAI,CAACA,UAAL,CAAgBD,IAAI,CAAC8B,IAArB;AACD,ACHL,UAAI,KAAKsB,YAAT,EAAuB;ADIpB,ACHD,ODNF,EAUGd,ICJIwB,CDNP,CAUS,UAACvB,GCJR,CAAqB,CDId,ICJmBa,YAA1B;ADIO,ACHR,eDGmBZ,OAAO,CAACD,KAAR,CAAcA,IGzBvBjC,CHyBS,CAAX,EGzBM6B,MAAM;AHyBZ,AGxBT,AFsBD,ODRC;AAWD,AGxBC,UAAI,KAAKZ,OAAL,CAAaZ,KAAb,IAAsB,KAAKa,SAAL,CAAeb,KAAzC,EAAgD;AAEhD,WAAKY,OAAL,CAAaZ,KAAb,GAAqBL,EAArB;AACA,WAAKkB,SAAL,CAAeb,KAAf,GAAuBwB,IAAvB;AACD,2BHsBMnC,MAAMC,YAAY;AACvB,WAAKD,IAAL,GAAYA,IAAZ;AACA,WAAKC,UAAL,GAAkBA,UAAlB,CAFuB,CAEO;4BGtBxBe,OAAO;AHuBb,AGtBAA,MAAAA,IHsBM4B,CGtBD,CAAC8C,KHsBO,GAAG,KAAK7C,CGtBrB,gBHsBgB,CAAuB,KAAK7C,IAAL,CAAUM,EAAjC,CAAhB;AGrBA,UAAMqF,aAAa,GAAG,KAAKxE,IAAL,CAAUD,YAAV,CAAuB,aAAvB,CAAtB;AHsBA,AGpBA,UHoBM4B,AGpBA8C,QHoBQ,GAAG,AGpBA,GAAG,EHoBE7C,EGpBE8C,IAAJ,EAApB,UHoBiB,CAAwB,KAAK7F,IAAL,CAAUM,EAAlC,CAAjB;;AACA,AGpBA,UHoBM0C,CGpBD8C,OHoBS,KGpBd,CAAkBF,WAAW,CAACG,OHqBtB,AGrBU,EAAlB,EAAyC,CHqB5B/F,IAAL,AGrBsCgG,CHqB5B/D,KADJ,IGpB2B,CAAgB2D,WAAhB,CAAzC,kCHsB2B,KAAK5F,IAAL,CAAUmC,IAFvB,+BAGL,KAAKnC,IAAL,CAAUkC,OAHL,iBAAd;;AAMA,AGxBA,UAAM+D,CHwBDtD,MAAL,CGxBc,GAAG,IAAIuD,QAAJ,CAAa,KAAK/E,IAAlB,CAAjB;AACA,UAAMnB,IAAI,GAAG,EAAb;AHwBA,WAAKD,SAAL,CAAeM,SAAf,GAA2B,KAAKN,SAAL,CAAeM,SAAf,GAA2B2C,QAAtD;AAEA,AGlCa,UHkCPC,OAAO,GAAGzC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAhB,AGxB4BwF,QAVf;AHmCbhD,AGnCa,MHmCbA,OAAO,CAACvC,SAAR,CAAkBC,KAAlB,GAA0B,oCAA1B;AACAsC,MAAAA,OAAO,CAACC,MAAR,CAAeN,OAAf,EAAwBE,QAAxB;AACA,AGrCa,WHqCR/C,SAAL,CAAemD,MAAf,CAAsBD,OAAtB;AACD,AG5BC,4DAAsC;AAAA;AAAA,cAA1BkD,IAA0B;AAAA,cAApBxF,KAAoB;;AACpCX,UAAAA,IAAI,CAACmG,IAAD,CAAJ,GAAaxF,KAAb;AACD;AAZY;AAAA;AAAA;AAAA;AAAA;;AAcb,WAAKyF,KAAL,CAAWpG,IAAX,EAAiB2F,aAAjB;;AAEA,gCAAU,KAAKxE,IAAf;AACAiB,MAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBC,KAAhB,CAAsB,MAAtB,EAjBa,CAiBkB;AAChC","file":"app.c3f9f951.js","sourceRoot":"..\\client","sourcesContent":["export class Content {\r\n  constructor(container) {\r\n    this.container = container;\r\n    this.data = {};\r\n    this.updateList = null;\r\n\r\n    this.handleClickTrashBtn = this._clickTrashBtn.bind(this);\r\n\r\n    // this._init();\r\n  }\r\n\r\n  // _init() {}\r\n\r\n  _clear() {\r\n    this.container.innerHTML = \"\";\r\n  }\r\n\r\n  _createEditButton(id) {\r\n    const btnNode = document.createElement(\"button\");\r\n\r\n    btnNode.classList.value = \"btn btn-warning\";\r\n    btnNode.textContent = \"Редактировать\";\r\n    btnNode.setAttribute(\"data-id\", id);\r\n\r\n    btnNode.addEventListener(\"click\", this._clickEditBtn);\r\n\r\n    return btnNode;\r\n  }\r\n\r\n  _createTrashButton(id) {\r\n    const btnNode = document.createElement(\"button\");\r\n\r\n    btnNode.classList.value = \"btn btn-danger ml-2\";\r\n    btnNode.innerHTML = `<i class=\"fas fa-trash-alt fa-lg\"></i>`;\r\n    btnNode.setAttribute(\"data-id\", id);\r\n\r\n    btnNode.addEventListener(\"click\", this.handleClickTrashBtn);\r\n\r\n    return btnNode;\r\n  }\r\n\r\n  _clickEditBtn(event) {\r\n    const id = event.currentTarget.getAttribute(\"data-id\");\r\n    const form = document.querySelector(\"#form\");\r\n    const titleField = form.querySelector('[name=\"title\"]');\r\n    const contentField = form.querySelector('[name=\"content\"]');\r\n    const idField = form.querySelector('[name=\"id\"]');\r\n    const dateField = form.querySelector('[name=\"date\"]');\r\n\r\n    form.setAttribute(\"data-method\", \"PUT\");\r\n\r\n    fetch(\"/api/data\", { method: \"GET\" })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        data.list.forEach((item) => {\r\n          if (item.id == id) {\r\n            titleField.value = item.title;\r\n            contentField.value = item.content;\r\n            idField.value = item.id;\r\n            dateField.value = item.date;\r\n\r\n            $(\"#formModal\").modal(\"show\");\r\n          }\r\n        });\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }\r\n\r\n  _clickTrashBtn(event) {\r\n    const id = event.currentTarget.getAttribute(\"data-id\");\r\n    const isConfirm = confirm(\"Вы уверены, что хотите удалить пост?\");\r\n\r\n    if (!isConfirm) return;\r\n\r\n    fetch(`/api/data/${id}`, { method: \"DELETE\" })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        // Очистить контент послу удаления\r\n        this._clear();\r\n        // Если метод для обновления списка передали в этот класс, то можно запустить\r\n        if (this.updateList) {\r\n          this.updateList(data.list);\r\n        }\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }\r\n\r\n  render(data, updateList) {\r\n    this.data = data;\r\n    this.updateList = updateList; // Присваиваем к свойству this.updateList колбэк updateList\r\n    const btnEdit = this._createEditButton(this.data.id);\r\n    const btnTrash = this._createTrashButton(this.data.id);\r\n    const template = `\r\n      <h3>${this.data.title}</h3>\r\n      <h6 class=\"text-muted\">${this.data.date}</h6>\r\n      <div>${this.data.content}</div>\r\n    `;\r\n\r\n    this._clear();\r\n    this.container.innerHTML = this.container.innerHTML + template;\r\n\r\n    const btnWrap = document.createElement(\"div\");\r\n    btnWrap.classList.value = \"mt-auto d-flex justify-content-end\";\r\n    btnWrap.append(btnEdit, btnTrash);\r\n    this.container.append(btnWrap);\r\n  }\r\n}\r\n","import { Content } from \"./content\";\r\n\r\nexport class List {\r\n  constructor(container) {\r\n    this.container = container;\r\n    this.activeItemId = null;\r\n    this.data = [];\r\n    this.content = new Content(document.querySelector(\"#content\"));\r\n\r\n    this.handleClickList = this._clickList.bind(this);\r\n\r\n    this._init();\r\n  }\r\n\r\n  _init() {\r\n    this.container.addEventListener(\"click\", this.handleClickList);\r\n  }\r\n\r\n  _clear() {\r\n    this.container.innerHTML = \"\";\r\n  }\r\n\r\n  _removeActive() {\r\n    if (!this.activeItemId) return;\r\n\r\n    const target = this.container.querySelector(\r\n      `[data-id=\"${this.activeItemId}\"]`\r\n    );\r\n    target.classList.remove(\"active\");\r\n  }\r\n\r\n  _selectListItem(id) {\r\n    const target = this.container.querySelector(`[data-id=\"${id}\"]`);\r\n\r\n    // После удаления этот элемент теряется, надо сделать проверку\r\n    if (target) {\r\n      this._removeActive();\r\n      this.activeItemId = id;\r\n      target.classList.add(\"active\");\r\n    } else {\r\n      // Если элемент удалён надо обнулить это свойство\r\n      this.activeItemId = null;\r\n    }\r\n\r\n    this.data.forEach((item) => {\r\n      if (id == item.id) {\r\n        // Передаём метод для рендера списка, чтобы там вызывать его для обновления\r\n        // Надо передать контекст вызова, this.render использует свойства из текущего класса\r\n        // Если не сделать bind мы потеряем свойства, которые хранятся в этом классе\r\n        this.content.render(item, this.render.bind(this));\r\n      }\r\n    });\r\n  }\r\n\r\n  _clickList(event) {\r\n    const target = event.target;\r\n\r\n    if (target.classList.value.includes(\"list-item\")) {\r\n      const id = target.getAttribute(\"data-id\");\r\n\r\n      this._selectListItem(id);\r\n    }\r\n  }\r\n\r\n  render(data) {\r\n    this.data = data;\r\n    this._clear();\r\n\r\n    this.data.forEach((item) => {\r\n      const template = `\r\n        <div class=\"list-item p-3\" data-id=\"${item.id}\">\r\n          <h5>${item.title}</h5>\r\n          <small>${item.date}</small>\r\n        </div>\r\n      `;\r\n\r\n      this.container.innerHTML = this.container.innerHTML + template;\r\n    });\r\n\r\n    if (this.activeItemId) {\r\n      this._selectListItem(this.activeItemId);\r\n    }\r\n  }\r\n}\r\n","// Скрытые поля не сбрасывают значение при вызове form.reset(),\r\n// делаем очистку формы в отдельной функции\r\nexport function resetForm(form) {\r\n  form.reset();\r\n\r\n  // Найдём все скрытые поля в форме и сбросим их значение\r\n  [...form.querySelectorAll('[type=\"hidden\"]')].forEach((input) => {\r\n    input.value = \"\";\r\n  });\r\n}\r\n","import { List } from \"./list\";\r\nimport { resetForm } from \"./reset-form\";\r\n\r\nexport class Form {\r\n  constructor(form) {\r\n    this.form = form;\r\n    this.idField = document.querySelector('[name=\"id\"]');\r\n    this.dateField = document.querySelector('[name=\"date\"]');\r\n\r\n    this.btnSubmit = document.querySelector('[type=\"submit\"]');\r\n    this.listContainer = document.querySelector(\"#list\");\r\n    this.list = new List(this.listContainer);\r\n\r\n    this.handleSubmit = this._submit.bind(this);\r\n\r\n    this._init();\r\n  }\r\n\r\n  _init() {\r\n    this.btnSubmit.addEventListener(\"click\", this.handleSubmit);\r\n  }\r\n\r\n  // Добавить ноль перед числом\r\n  _parseNumber(num) {\r\n    let parsedNum = num;\r\n\r\n    return parsedNum < 10 ? \"0\" + parsedNum : parsedNum;\r\n  }\r\n\r\n  _buildDate(date) {\r\n    // dd.mm.YYYY hh:mm\r\n    let day = this._parseNumber(date.getDate());\r\n    let month = this._parseNumber(date.getMonth() + 1);\r\n    let year = date.getFullYear();\r\n\r\n    let hours = this._parseNumber(date.getHours());\r\n    let minutes = this._parseNumber(date.getMinutes());\r\n\r\n    return `${day}.${month}.${year} ${hours}:${minutes}`;\r\n  }\r\n\r\n  // Метод отправки зависит от аргумента method\r\n  _send(data, method) {\r\n    let url = \"/api/data\";\r\n\r\n    if (method == \"PUT\") url = url + `/${data.id}`;\r\n\r\n    fetch(url, {\r\n      method,\r\n      headers: { \"Content-Type\": \"application/json;charset=utf-8\" },\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        this.list.render(data.list);\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }\r\n\r\n  _setMetaData(id, date) {\r\n    // Если мы редактируем, то метаданные уже есть и менять их не будем\r\n    if (this.idField.value && this.dateField.value) return;\r\n\r\n    this.idField.value = id;\r\n    this.dateField.value = date;\r\n  }\r\n\r\n  _submit(event) {\r\n    event.preventDefault();\r\n    const currentMethod = this.form.getAttribute(\"data-method\");\r\n\r\n    const currentDate = new Date();\r\n    this._setMetaData(currentDate.getTime(), this._buildDate(currentDate));\r\n\r\n    const formData = new FormData(this.form);\r\n    const data = {};\r\n\r\n    for (const [name, value] of formData) {\r\n      data[name] = value;\r\n    }\r\n\r\n    this._send(data, currentMethod);\r\n\r\n    resetForm(this.form);\r\n    $(\"#formModal\").modal(\"hide\"); // Открыть модальное окно\r\n  }\r\n}\r\n","import { Form } from \"./form\";\r\nimport { List } from \"./list\";\r\nimport { resetForm } from \"./reset-form\";\r\n\r\nconst formNode = document.querySelector(\"#form\");\r\nnew Form(formNode);\r\n\r\n// ---------------------------------------------------\r\n\r\nconst createBtnNode = document.querySelector(\"#createBtn\");\r\ncreateBtnNode.addEventListener(\"click\", () => {\r\n  formNode.setAttribute(\"data-method\", \"POST\");\r\n  resetForm(formNode);\r\n  $(\"#formModal\").modal(\"show\");\r\n});\r\n\r\nconst listNode = document.querySelector(\"#list\");\r\nconst list = new List(listNode);\r\n\r\nfetch(\"/api/data\", { method: \"GET\" })\r\n  .then((response) => response.json())\r\n  .then((data) => list.render(data.list))\r\n  .catch((error) => console.error(error));\r\n"]}